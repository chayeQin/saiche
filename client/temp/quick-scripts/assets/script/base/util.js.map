{"version":3,"sources":["util.js"],"names":["exports","randInt","min","max","range","rand","Math","random","round","inRange","randNum","rangeDatas","index","data","limit","length","randRange","infos","key","randMax","total","Object","keys","forEach","id","info","rangeData","push","UTIL"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACAA,QAAQC,OAAR,GAAkB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAClC,QAAIC,QAAQD,MAAMD,GAAlB;AACA;AACA;AACA,QAAIG,OAAOC,KAAKC,MAAL,EAAX;AACA,WAAQL,MAAMI,KAAKE,KAAL,CAAWH,OAAOD,KAAlB,CAAd;AACH,CAND;;AAQAJ,QAAQS,OAAR,GAAkB,UAAUC,OAAV,EAAmBC,UAAnB,EAA+B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAK,IAAIC,KAAT,IAAkBD,UAAlB,EAA8B;AAC1B,YAAIE,OAAOF,WAAWC,KAAX,CAAX;AACA,YAAIE,QAAQD,KAAKC,KAAjB;AACA,YAAIA,UAAU,IAAV,IAAkBJ,UAAUI,KAAhC,EAAuC;AACnC,mBAAOF,KAAP;AACH;AACJ;;AAED,WAAOD,WAAWI,MAAX,GAAoB,CAA3B;AACH,CAlBD;;AAoBAf,QAAQgB,SAAR,GAAoB,UAAUC,KAAV,EAAgD;AAAA,QAA/BC,GAA+B,uEAAzB,OAAyB;AAAA,QAAhBC,OAAgB,uEAAN,IAAM;;AAChE,QAAIR,aAAa,EAAjB;AACA,QAAIS,QAAQ,CAAZ;;AAEAC,WAAOC,IAAP,CAAYL,KAAZ,EAAmBM,OAAnB,CAA2B,UAASC,EAAT,EAAa;AACpC,YAAIC,OAAOR,MAAMO,EAAN,CAAX;AACA,YAAIV,QAAQW,KAAKP,GAAL,CAAZ;AACAE,iBAASN,KAAT;AACA,YAAIY,YAAY,EAAC,SAASN,KAAV,EAAiB,QAAQK,IAAzB,EAAhB;AACAd,mBAAWgB,IAAX,CAAgBD,SAAhB;AACH,KAND;;AAQAN,YAASD,YAAY,IAAb,GAAqBA,OAArB,GAA+BC,KAAvC;AACA,QAAIV,UAAUkB,KAAK3B,OAAL,CAAa,CAAb,EAAgBmB,KAAhB,CAAd;AACA,QAAIR,QAAQgB,KAAKnB,OAAL,CAAaC,OAAb,EAAsBC,UAAtB,CAAZ;AACA,QAAIe,YAAYf,WAAWC,KAAX,CAAhB;;AAEA,WAAOc,UAAUD,IAAjB;AACH,CAlBD","file":"util.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\base","sourcesContent":["// UTIL模块\r\n// --------------------------------------------------------------------------------\r\n// var seedrandom = require(\"seedrandom\");\r\n// current no install.\r\n// npm install seedrandom --save\r\nexports.randInt = function (min, max) {\r\n    var range = max - min;\r\n    // var rng = seedrandom();\r\n    // var rand = rng();\r\n    var rand = Math.random();\r\n    return (min + Math.round(rand * range));\r\n}\r\n\r\nexports.inRange = function (randNum, rangeDatas) {\r\n    // 查看randNum落在哪个区间\r\n    // i.e: 0-10, 11-20, 20-\r\n    // rangeDatas: [\r\n    //  {\"limit\": 10},\r\n    //  {\"limit\": 20},\r\n    //  {},\r\n    //  ]\r\n\r\n    for (var index in rangeDatas) {\r\n        var data = rangeDatas[index];\r\n        var limit = data.limit;\r\n        if (limit !== null && randNum < limit) {\r\n            return index\r\n        }\r\n    }\r\n\r\n    return rangeDatas.length - 1;\r\n}\r\n\r\nexports.randRange = function (infos, key = \"limit\", randMax = null) {\r\n    var rangeDatas = [];\r\n    var total = 0;\r\n\r\n    Object.keys(infos).forEach(function(id) {\r\n        var info = infos[id];\r\n        let limit = info[key];\r\n        total += limit;\r\n        var rangeData = {\"limit\": total, \"info\": info};\r\n        rangeDatas.push(rangeData);\r\n    });\r\n\r\n    total = (randMax !== null) ? randMax : total;\r\n    var randNum = UTIL.randInt(0, total);\r\n    var index = UTIL.inRange(randNum, rangeDatas);\r\n    var rangeData = rangeDatas[index];\r\n\r\n    return rangeData.info\r\n}"]}