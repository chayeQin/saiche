{"version":3,"sources":["block3.js"],"names":["BLOCK","require","cc","Class","extends","clsBlock","properties","targetX","changeLane","touchX","time","time2","start","director","getCollisionManager","enabled","onCollisionEnter","other","self","name","substring","heroCarScript","node","getComponent","x","tag","audioCollision","play","nowSpeed","getSpeed","gearNow","getNowGear","shiftBigX","UTIL","randInt","shiftSmallX","rollBigOrSmall","playBigCrashSound","setSpeed","setCanChangeLane","leftBigRoll","playSmallCrashSound","nodeRotateAction","rightBigRoll","update","dt","changeX","changeSpeed"],"mappings":"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","file":"block3.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\game","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\nvar BLOCK = require(\"block\");\r\n\r\ncc.Class({\r\n    extends: BLOCK.clsBlock,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        targetX: 0,\r\n        changeLane: 5,\r\n        touchX: 0,\r\n        time: 0,\r\n        time2: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        cc.director.getCollisionManager().enabled = true;\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if (other.name.substring(0, 3) != \"car\") return;\r\n\r\n\r\n        this.heroCarScript = other.node.getComponent(\"car\");\r\n        this.targetX = other.node.x;\r\n\r\n        if (self.tag == 0) {\r\n            this.audioCollision.play();\r\n            var nowSpeed = this.heroCarScript.getSpeed();\r\n            if (nowSpeed  > 72) {\r\n                nowSpeed = 72;\r\n            }\r\n            var gearNow = this.heroCarScript.getNowGear();\r\n            var shiftBigX = UTIL.randInt(20,40);\r\n            var shiftSmallX = UTIL.randInt(10,15);\r\n            this.time = gearNow * 2.5;\r\n            if (this.node.x > this.targetX) {\r\n                this.touchX = - (shiftSmallX / 2.5);\r\n                if (this.rollBigOrSmall(gearNow) == true) {\r\n                    this.heroCarScript.playBigCrashSound();\r\n\r\n                    this.heroCarScript.setSpeed(0);\r\n                    this.time2 = gearNow * 2;\r\n                    this.touchX = - (shiftBigX / 2.5);\r\n                    this.heroCarScript.setCanChangeLane(false);\r\n                    this.leftBigRoll(other.node, this.heroCarScript);\r\n\r\n                } else {\r\n                    this.heroCarScript.playSmallCrashSound();\r\n\r\n                    this.nodeRotateAction(other.node, 0.3, 60, 1);\r\n                    this.nodeRotateAction(other.node, 0.3, -60, 1);\r\n                    this.heroCarScript.setSpeed(nowSpeed - (5 * gearNow));\r\n                }\r\n            } else {\r\n                this.touchX = (shiftSmallX / 2.5);\r\n                if (this.rollBigOrSmall(gearNow) == true) {\r\n                    this.heroCarScript.playBigCrashSound();\r\n\r\n                    this.heroCarScript.setSpeed(0);\r\n                    this.time2 = gearNow * 2;\r\n                    this.touchX = (shiftBigX / 2.5);\r\n                    this.heroCarScript.setCanChangeLane(false);\r\n                    this.rightBigRoll(other.node, this.heroCarScript);\r\n\r\n                } else {\r\n                    this.heroCarScript.playSmallCrashSound();\r\n\r\n                    this.nodeRotateAction(other.node, 0.3, -60, 1);\r\n                    this.nodeRotateAction(other.node, 0.3, 60, 1);\r\n                    this.heroCarScript.setSpeed(nowSpeed - (5 * gearNow));\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    update (dt) {\r\n        if (this.time > 0) {\r\n            this.heroCarScript.changeX(this.touchX);\r\n            this.time --;\r\n        }\r\n        if (this.time2 > 0) {\r\n            this.heroCarScript.changeSpeed(-12);\r\n            this.time2 --;\r\n        }\r\n        \r\n    },\r\n});\r\n"]}